var _ovlc;(function(n){var nt;if(!_w.ovlc){_w.ovlc=n;var v="b_hide",tt="ovlHide",it="ovlShow",y="click",l="keyup",rt="ovlIdxInc",ut="ovlIdxDec",p="ovlIdxChanged",w="unload",b="ajax.unload",e=sj_be,o=sj_ue,i=sj_evt,r=[],u={},a=!1,s=!1,h=!1,t;function ft(n){var t=_ge(n),i;if(t!=null&&(ot(),k(t,!0),!r[n])){i=f(t,"data-cUrl");i=i.replace("%IG%",_G.IG);var u=f(t,"data-fcId"),e=f(t,"data-fcCe"),o=f(t,"data-cil");r[n]=new nt(n,i,u,e,o==="1")}}function et(n,t,i){var u=r[n];return u!=null?(u.show(t,i),!0):!1}function ot(){a||(a=!0,e(_w,w,c),i.bind(b,c),i.bind(p,function(n){var i=n[1],r=i!=null?i.ovlConId:null;r&&t==r&&ovlinp.logIndexChange(i.ovlConId,i.oldIdx,i.newIdx)}))}function addRemoveClass(n,t,i){var r,u,f;n&&t&&(r=n.classList,r?i?r.add(t):r.remove(t):(u=" "+n.className+" ",f=" "+t+" ",i?u.indexOf(f)<0&&(n.className+=" "+t):n.className=u.replace(f," ").replace(/^\s+|\s+$/gm,"")))}function k(n,t){var h=ht(f(n,"data-ht")),s;if(h!=null)for(s=0;s<h.length;s++){var l=h[s],i=l.id,c=_ge(i);c&&(u[i]&&(o(c,y,u[i]),u[i]=null),t&&(u[i]=st(n.id,l.idx,i),sj_evt.bind("OverlayClick",function(t){var i=r[n.id];t[1]&&t[2]&&(t[3]&&i.updateCUrl(t[3]),d(t[1],t[2]))}),e(c,y,u[i])))}}function st(n,t,i){return function(r){d(n,t,i);sj_sp(r);sj_pd(r)}}function d(t,i,r){n.show(t,i,r)}function handleKeyUpEvent(n){if(t){var i=n.keyCode;i==37?(g(t,!1),ovlinp.logKeyup(t,i)):i==39&&(g(t,!0),ovlinp.logKeyup(t,i))}}function c(){var t,n;o(_w,w,c);o(_d,l,handleKeyUpEvent);i.unbind(b,c);for(t in r)t&&(n=r[t],n&&n.el&&(n.loaded=!1,k(n.el,!1),n.el.parentNode.removeChild(n.el)));r=[];a=!1;s=!1;h=!1}function g(n,t){var r={};r.ovlConId=n;i.fire(t?rt:ut,r)}function fireIndexChangedEvent(n,t,r){var u={};u.ovlConId=n;u.oldIdx=t;u.newIdx=r;i.fire(p,u)}function fireShowEvent(n){i.fire(it,n)}function f(n,t){return n==null?null:n.getAttribute(t)}function ht(n){return n?typeof JSON!="undefined"?JSON.parse(n):eval("("+n+")"):null}n.init=ft;n.show=et}nt=function(){function n(n,t,r,u,f){this.cUrl=t;var o=this;o.el=_ge(n);o.fc=_ge(r);o.fcCe=u;o.cil=f;i.bind(tt,function(t){t[1]==n&&o.hide()});u&&e(_w,"message",function(t){var u=_w.location,f=u.origin||u.protocol+"//"+u.hostname,r;t.origin===f&&(r=t.data,r&&r.command&&r.command===o.fcCe&&i.fire("ovlHide",n))},!0);_d.body.appendChild(o.el)}return n.prototype.updateCUrl=function(n){var t=this;t.cUrl=n},n.prototype.show=function(n,i){var r,u,f,o;s||(r=this,u=r.el,r.loaded?(s=!0,t=u.id,fireIndexChangedEvent(t,-1,n),addRemoveClass(u,v,!1),fireShowEvent(t),r.showTime=new Date,e(_d,l,handleKeyUpEvent),ovlinp.logShow(t),r.cil&&ovlinp.logClick(t,i)):h||(h=!0,r.fc!=null?(r.loaded=!0,f=_d.createElement("iframe"),f.className="ovlci",f.src=r.cUrl,r.fc.appendChild(f),r.show(n,i)):(o=new Date,sj_ajax(r.cUrl,{callback:function(t,f){h=!1;t&&f.request.response&&(f.appendTo(u),r.loaded=!0,ovlinp.logLoad(u.id,o),r.show(n,i))}}))))},n.prototype.hide=function(){var n=this,t=n.el,i=n.showTime;addRemoveClass(t,v,!0);s=!1;n.loaded&&i&&(ovlinp.logHide(t.id,i),o(_d,l,handleKeyUpEvent),n.showTime=null)},n}()})(_ovlc||(_ovlc={}))
var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Reference;(function(n){var t;(function(t){var i=function(n){function t(t){var i=n.call(this)||this;return i.properties=t,i.init(),i}return __extends(t,n),t.prototype.init=function(){n.prototype.init.call(this)},t.prototype.getAnswerPosition=function(){var i=_ge("d_ans"),n,t,r,u;if(!i&&(n=_d.getElementsByClassName&&_d.getElementsByClassName("d_ans"),n&&n.length>0))for(t=0;t<n.length;t++)if(r=n[t],r&&r.style&&r.style.display!=="none"){i=n[t];break}if(i)return(u=i.getBoundingClientRect(),!u)?void 0:{x:u.left,y:u.top}},t.prototype.getTooltipPos=function(n){var t,i,r,u,f,e;if(this.tooltip)return t=this.tooltip.getBoundingClientRect(),i=t.height==0,i&&(this.tooltip.style.display="block",this.tooltip.style.opacity="0",t=this.tooltip.getBoundingClientRect()),r=this.getAnswerPosition(),u=n.top-t.height<10,f=u?n.bottom+this.properties.tooltipSpacing-r.y:n.top-t.height-this.properties.tooltipSpacing-r.y,e=n.left+n.width/2-t.width/3-r.x,i&&(this.tooltip.style.display="none"),{top:f,left:e,initiallyHidden:i,renderAtBottom:u}},t.prototype.setEntityId=function(n){this.entityId=n},t.prototype.getEntityId=function(){return this.entityId},t.prototype.showTooltip=function(n,t){var u=this,i,r;this.tooltip&&(i=this.getClientRect(n,t),r=this.getTooltipPos(i),this.show(function(){return u.showTip(r)},50))},t.prototype.getClientRect=function(n,t){var i=t.getClientRects(),o=n.clientX,u,e;if(i&&i.length>1&&o){var s=i[0],r=void 0,f=void 0;for(u=0;u<i.length;u++)e=i[u],r=o-e.left,(!f&&r>0||r>0&&f>r)&&(s=e,f=r);return s}return t.getBoundingClientRect()},t.prototype.hideTooltip=function(){this.hide()},t.prototype.hideImmediately=function(){this.clearTimers();this.hideTip()},t}(n.EntityLinking.Tooltip);t.TooltipController=i})(t=n.EntityLinking||(n.EntityLinking={}))})(Reference||(Reference={}))